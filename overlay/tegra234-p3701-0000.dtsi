// SPDX-License-Identifier: GPL-2.0
// Copyright (c) 2022-2023, NVIDIA CORPORATION & AFFILIATES.  All rights reserved.

#include "tegra234-p3737-0000-camera-imx274-dual.dtsi"
/ {
	fragment-t234-p3701-0000@0 {
		target-path = "/";
		__overlay__ {
			bus@0 {
				i2c@c240000 {
					ina3221@40 {
						compatible = "ti,ina3221";
						reg = <0x40>;
						#address-cells = <1>;
						#size-cells = <0>;
						#io-channel-cells = <1>;
						channel@0 {
							reg = <0x0>;
							label = "VDD_GPU_SOC";
							shunt-resistor-micro-ohms = <2000>;
						};
						channel@1 {
							reg = <0x1>;
							label = "VDD_CPU_CV";
							shunt-resistor-micro-ohms = <2000>;
						};
						channel@2 {
							reg = <0x2>;
							label = "VIN_SYS_5V0";
							shunt-resistor-micro-ohms = <2000>;
						};
					};

					ina3221@41 {
						compatible = "ti,ina3221";
						reg = <0x41>;
						#address-cells = <1>;
						#size-cells = <0>;
						#io-channel-cells = <1>;
						channel@0 {
							reg = <0x0>;
							label = "NC";
						};
						channel@1 {
							reg = <0x1>;
							label = "VDDQ_VDD2_1V8AO";
							shunt-resistor-micro-ohms = <2000>;
						};
						channel@2 {
							reg = <0x2>;
							label = "NC";
						};
					};
				};

				spi@3270000 {
					flash@0 {
						spi-max-frequency = <51000000>;
						spi-tx-bus-width = <1>;
						spi-rx-bus-width = <1>;
					};
				};
			};

			hdr40_vdd_3v3: regulator@3 {
				compatible = "regulator-fixed";
				reg = <3>;
				regulator-name = "vdd-3v3-sys";
				regulator-min-microvolt = <3300000>;
				regulator-max-microvolt = <3300000>;
			};

			bpmp {
				i2c {
					vrs@3c {
						compatible = "nvidia,vrs-pseq";
						reg = <0x3c>;
						interrupts = <GIC_SPI 209 IRQ_TYPE_LEVEL_HIGH>;
						interrupt-controller;
						#interrupt-cells = <3>;
						status = "disabled";
						vrs_rtc: rtc {
							status = "okay";
						};
					};

					tegra_tmp451: thermal-sensor@4c {
						compatible = "ti,tmp451";
						reg = <0x4c>;
						vcc-supply = <&vdd_1v8_ao>;
						#thermal-sensor-cells = <1>;
						status = "okay";
					};
				};
			};

			thermal-zones {
				tboard-thermal {
					polling-delay = <1000>;
					polling-delay-passive = <1000>;
					thermal-sensors = <&tegra_tmp451 0>;
					status = "okay";
				};

				tdiode-thermal {
					polling-delay = <1000>;
					polling-delay-passive = <1000>;
					thermal-sensors = <&tegra_tmp451 1>;
					status = "okay";
				};
			};

			eeprom-manager {
				bus@0 {
					i2c-bus = <&gen1_i2c>;
					eeprom@0 {
						slave-address = <0x50>;
						label = "cvm";
					};
				};
			};
		};
	};
};
